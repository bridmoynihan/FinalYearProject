<app-navbar></app-navbar>

  <div class="container">
    <div *ngIf="!inventoryTrue">
      <h1 class="display-4">We've noticed you haven't created an inventory yet.</h1>
      <p class="lead">Click here to create your first inventory system!</p>
      <button type="button" class="btn btn-dark" (click)="getBarcode()">Create your first Inventory</button>
    </div>
    <div *ngIf="inventoryTrue">
      <button type="button" class="add btn btn-dark addbtn" (click)="gotoForm()">Add another Item</button>
      <div class="dropdown">
          <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Filter By
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="#">Date</a>
            <a class="dropdown-item" href="#">Status</a>
            <a class="dropdown-item" href="#">Location</a>
          </div>
        </div>
      <table class="table table-striped table-dark table-hover">
        <thead>
          <tr>
            <th scope="col">Barcode</th>
            <th scope="col">Name</th>
            <th scope="col">Expiry</th>
            <th scope="col">Location</th>
            <th scope="col">Cost</th>
            <th scope="col">Quantity</th>
            <th scope="col">Status</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of items | async; let i = index">
            <td *ngIf="item.data.isEditable">
              <input style="width:80px" class="textInput" type="text" [(ngModel)]="item.itemBarcode" placeholder={{item.data.itemBarcode}}>
            </td>
            <td *ngIf="!item.data.isEditable">{{item.data.itemBarcode}}</td>
            <td *ngIf="item.data.isEditable">
              <input style="width:80px" class="textInput" type="text" [(ngModel)]="item.itemName" placeholder={{item.data.itemName}}>
            </td>
            <td *ngIf="!item.data.isEditable">{{item.data.itemName}}</td>
            <td *ngIf="item.data.isEditable">
              <input style="width:80px" type="text" [(ngModel)]="item.expiryDate" placeholder={{item.data.expiryDate}}>
            </td>
            <td *ngIf="!item.data.isEditable">{{item.data.expiryDate}}</td>
            <td *ngIf="item.data.isEditable">
              <input style="width:80px" type="text" [(ngModel)]="item.location" placeholder={{item.data.location}}>
            </td>
            <td *ngIf="!item.data.isEditable">{{item.data.location}}</td>
            <td *ngIf="item.data.isEditable">
              <input style="width:80px" type="text" [(ngModel)]="item.cost" placeholder={{item.data.cost}}>
            </td>
            <td *ngIf="!item.data.isEditable">{{item.data.cost | currency:'EUR':true}}</td>
            <td>{{item.data.quantity}}</td>
            <td><span class="badge badge-pill badge-warning">{{item.data.quality}}</span><span *ngIf="item.data.needsReorder" class="badge badge-pill badge-info">{{this.reorderText}}</span></td>
            <td>
              <div *ngIf="item.data.isEditable">
                <button class="btn btn-success" (click)="updateItem(item, item.id)">
                  <i class="fa fa-save"></i>
                </button>
                <button class="btn btn-danger setFalse" (click)="setEdit(item, false)">
                    <i class="fa fa-close"></i>
                  </button>
              </div>
              <span class="btnGroup">
              <div style="height: 30px;" *ngIf="!item.data.isEditable">
              <button class="btn btn-success setTrue" (click)="setEdit(item, true)">
                <i class="fa fa-edit"></i>
              </button>
              <app-delete-modal (notify)='onNotify($event)' [Item]="item.data" [ItemID]="item.id"></app-delete-modal>
            </div>
          </span> 
            </td>
            
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div>